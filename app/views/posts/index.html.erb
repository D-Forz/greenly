<%= content_for(:title, 'Comunidad | Greenly') %>

<div class="container">
  <main>
    <div class="row">
      <div class="col-md-3">
        <%= render 'shared/sidebar' %>
      </div>
      <div class="col-md-6">

        <%= render "shared/empty_state" if @posts.empty? %>

        <%= turbo_frame_tag "posts-#{@pagy.page}", class: "posts" do %>
          <%= render @posts %>
          <% if @pagy.next %>
            <%= turbo_frame_tag "posts-#{@pagy.next}", loading: :lazy, class: "posts",
            src: pagy_url_for(@pagy, @pagy.next) %>
          <% end %>
        <% end %>
      </div>
      <div class="col-md-3">
        <div class="events-list">
          <h2>Next Events</h2>
          <ul>
            <% @events.each do |event| %>
              <li><%= link_to event.title, event_path(event), class: 'text-decoration-none' %></li>
            <% end %>
          </ul>
          <p>Look for more events <%= link_to "here", events_path %></p>
          <p><%= link_to "Create a new Event", new_event_path %></p>
        </div>
      </div>
    </div>
  </main>
</div>
